# 实施方案：前端 Canvas 智能改色

我们将实现一个基于 Canvas 的智能改色算法，优先保证家具的纹理和光影不丢失。

## 1. 核心逻辑 (geminiService.ts)
我们将重写 `editFurnitureColor` 方法，不再调用任何外部 API，而是直接在浏览器中处理图片。

### 算法步骤：
1.  **加载图片**：将 Base64 图片加载到 Canvas。
2.  **颜色混合**：
    *   使用 `multiply` (正片叠底) 混合模式将目标颜色叠加到原图上。这能很好地保留原图的阴影和纹理。
    *   为了防止颜色过深，我们会调节透明度 (Opacity)。
3.  **可选优化**：如果时间允许，可以加入简单的亮度调整，确保深色家具变浅色时也能看清（虽然纯前端做这个很难完美，但比 AI 瞎画要好）。

## 2. 代码实现
*   **修改文件**：`services/geminiService.ts`
*   **清理**：移除阿里云相关的代码和依赖。

## 3. 预期效果
*   **速度**：点击即生成，无需等待。
*   **质感**：木纹、光影完美保留。
*   **局限**：全图改色（无法自动识别家具轮廓，需要用户上传时最好是家具特写，或者我们默认对全图应用滤镜，这对于演示来说通常足够了）。

我们先试这个方案，如果效果不好，我们再讨论其他更复杂的 AI 方案（比如 OpenCV WASM 前端分割）。
